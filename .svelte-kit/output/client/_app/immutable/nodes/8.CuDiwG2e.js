import{h as ye,a as Pe,s as i,r as $e,e as we,i as ke}from"../chunks/24e2lO8G.js";import{h as qe,t as u,a as m}from"../chunks/j7d9bldu.js";import{i as ae}from"../chunks/DzluJWIa.js";import{p as re,l as y,a as se,e as oe,f as M,b as a,t as T,s as p,m as g,d as N,g as e,$ as je,c as d,n as Se,r as c}from"../chunks/XjSzAxxV.js";import{e as Ie,s as Re}from"../chunks/DuS9CJ1Y.js";import{p as ne,s as le,a as ce,i as z}from"../chunks/BQQYos4s.js";import{h as ee}from"../chunks/CoueGlLg.js";import{S as Ue,b as Ce}from"../chunks/1yZpvcLQ.js";import{p as ie}from"../chunks/B9GwK8tt.js";import{g as te}from"../chunks/Dzz9Ws4N.js";import{P as Oe}from"../chunks/C4Ckgbfu.js";async function De({url:k,depends:h}){h("app:search");const f=k.searchParams.get("q")||"",b=parseInt(k.searchParams.get("page")||"1");try{const[l,_,t]=await Promise.all([f?ye(f,b):{posts:[],totalPages:0},Pe(1,12),fetch("https://rooidadha.ir/wp-json/backlink/v1/links")]),r=await t.json();return{query:f,posts:l.posts,totalPages:l.totalPages,currentPage:b,lasttextPosts:_.posts,backlinks:r}}catch(l){return console.error("Error in search page load:",l),{query:f,posts:[],totalPages:0,currentPage:b,lasttextPosts:[],backlinks:[]}}}const at=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));var Ee=u('<meta name="description"> <meta name="robots" content="noindex, follow"> <link rel="canonical"> <meta property="og:title"> <meta property="og:description"> <meta property="og:type"> <meta property="og:url"> <meta property="og:site_name"> <meta property="og:locale">',1);function ze(k,h){re(h,!1);const[f,b]=le(),l=()=>ce(ie,"$page",f),_=g(),t=g(),r=g(),s=g(),P=g();let v=ne(h,"query",8,"");y(()=>l(),()=>{p(_,`https://rasanashr.ir${l().url.pathname}`)}),y(()=>N(v()),()=>{p(t,v()?`جستجو: ${v()} | رسا نشر`:"جستجو در رسا نشر")}),y(()=>N(v()),()=>{p(r,v()?`نتایج جستجو برای ${v()} در پایگاه خبری تحلیلی رسا نشر`:"جستجو در مطالب پایگاه خبری تحلیلی رسا نشر")}),y(()=>(e(t),e(r),e(_)),()=>{p(s,{title:e(t),description:e(r),type:"website",url:e(_),site_name:"رسا نشر",locale:"fa_IR"})}),y(()=>{},()=>{p(P,"https://rasanashr.ir/search")}),se(),ae(),qe(A=>{var C=Ee(),q=M(C),j=a(q,4),S=a(j,2),$=a(S,2),x=a($,2),I=a(x,2),O=a(I,2),B=a(O,2);T(()=>{je.title=e(t),i(q,"content",e(r)),i(j,"href",e(P)),i(S,"content",e(s).title),i($,"content",e(s).description),i(x,"content",e(s).type),i(I,"content",e(s).url),i(O,"content",e(s).site_name),i(B,"content",e(s).locale)}),m(A,C)}),oe(),b()}var Me=u('<img class="w-[98%] h-50 object-cover rounded-xl">'),Te=u('<article class="bg-stone-100 rounded-lg shadow-lg overflow-hidden"><!> <div class="p-6"><h2 class="text-lg font-bold lg:text-2xl text-justify mb-4"><a class="hover:text-red-600"><!></a></h2> <div class="prose prose-lg max-w-none mb-4 text-gray-600 text-justify leading-7"><!></div></div></article>'),Ae=u('<div class="mt-8"><!></div>'),Be=u('<div class="space-y-8"></div> <!>',1),Fe=u('<p class="text-xl text-gray-600 text-center py-12">نتیجه‌ای برای جستجوی شما یافت نشد.</p>'),Ge=u('<h1 class="text-lg font-bold lg:text-3xl text-justify mb-6"> </h1> <!>',1),He=u('<div class="text-center py-12 text-gray-600">لطفاً عبارت مورد نظر خود را جستجو کنید.</div>'),Je=u('<!> <div class="flex flex-col lg:flex-row gap-8"><div class="w-full lg:w-2/3"><form class="mb-8 flex gap-2 bg-white p-4 rounded-lg shadow-lg"><input type="search" placeholder="جستجو در مطالب..." class="flex-grow p-2 border border-gray-300 rounded focus:outline-none focus:border-red-500"> <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition-colors">جستجو</button></form> <!></div> <!></div>',1);function rt(k,h){re(h,!1);const[f,b]=le(),l=()=>ce(ie,"$page",f),_=g();let t=ne(h,"data",8),r=g(t().query),s=g(t().posts),P=g(t().totalPages),v=g(t().currentPage);async function A(o){o.preventDefault(),e(r).trim()&&await te(`/search?q=${encodeURIComponent(e(r).trim())}`,{replaceState:!0})}function C(o){te(`/search?q=${encodeURIComponent(e(r))}&page=${o}`)}y(()=>l(),()=>{p(_,`https://rasanashr.ir${l().url.pathname}${l().url.search}`)}),y(()=>N(t()),()=>{p(s,t().posts),p(P,t().totalPages),p(v,t().currentPage)}),se(),ae();var q=Je(),j=M(q);ze(j,{get query(){return t().query},get currentUrl(){return e(_)}});var S=a(j,2),$=d(S),x=d($),I=d(x);$e(I),Se(2),c(x);var O=a(x,2);{var B=o=>{var D=Ge(),F=M(D),ge=d(F);c(F);var ve=a(F,2);{var me=w=>{var E=Be(),G=M(E);we(G,5,()=>e(s),ke,(R,n)=>{var U=Te(),Q=d(U);{var he=K=>{var L=Me();T(()=>{var X,Y,Z;i(L,"src",((Z=(Y=(X=e(n)._embedded)==null?void 0:X["wp:featuredmedia"])==null?void 0:Y[0])==null?void 0:Z.source_url)||"/placeholder.jpg"),i(L,"alt",e(n).title.rendered)}),m(K,L)};z(Q,K=>{e(n)._embedded&&e(n)._embedded["wp:featuredmedia"]&&K(he)})}var V=a(Q,2),H=d(V),J=d(H),be=d(J);ee(be,()=>e(n).title.rendered),c(J),c(H);var W=a(H,2),xe=d(W);ee(xe,()=>e(n).excerpt.rendered),c(W),c(V),c(U),T(()=>i(J,"href",`/${e(n).id??""}/${e(n).slug??""}`)),m(R,U)}),c(G);var fe=a(G,2);{var _e=R=>{var n=Ae(),U=d(n);Oe(U,{get currentPage(){return e(v)},get totalPages(){return e(P)},onPageChange:C}),c(n),m(R,n)};z(fe,R=>{e(P)>1&&R(_e)})}m(w,E)},ue=w=>{var E=Fe();m(w,E)};z(ve,w=>{e(s)&&e(s).length>0?w(me):w(ue,!1)})}T(()=>Re(ge,`نتایج جستجو برای: ${t().query??""}`)),m(o,D)},de=o=>{var D=He();m(o,D)};z(O,o=>{t().query?o(B):o(de,!1)})}c($);var pe=a($,2);Ue(pe,{get lasttextPosts(){return t().lasttextPosts},get backlinks(){return t().backlinks}}),c(S),Ce(I,()=>e(r),o=>p(r,o)),Ie("submit",x,A),m(k,q),oe(),b()}export{rt as component,at as universal};
