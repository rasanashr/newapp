import{a as A,e as G,i as H,s as D}from"../chunks/24e2lO8G.js";import{c as J,a as l,t as u}from"../chunks/j7d9bldu.js";import{i as C}from"../chunks/DzluJWIa.js";import{p as F,f as E,e as N,b as _,r as o,c as p,g as e,t as U,m as w,l as K,a as L,s as m}from"../chunks/XjSzAxxV.js";import{s as Q}from"../chunks/DuS9CJ1Y.js";import{p as q,i as I}from"../chunks/BQQYos4s.js";import{o as R}from"../chunks/C7mwA5k6.js";import{h as V}from"../chunks/CoueGlLg.js";async function W(){try{return{akharinkhabarPosts:(await A(1,50)).posts}}catch(i){return console.error("Error loading initial posts:",i),{akharinkhabarPosts:[]}}}const vt=Object.freeze(Object.defineProperty({__proto__:null,load:W},Symbol.toStringTag,{value:"Module"}));var X=u('<li class="list-row bg-linear-to-r/hsl from-indigo-500 to-teal-400 mb-1 items-center"><div class="w-8 text-center text-xl font-bold text-red-700 tabular-nums"></div> <div class="flex items-center justify-center min-w-20"><img class="size-12 rounded-lg" loading="lazy" decoding="async"></div> <div class="list-col-grow"><a class="link no-underline"><h4 class="text-md font-bold no-underline text-justify"><!></h4></a></div></li>'),Y=u('<div class="badge badge-md mb-2"><h1 class="font-extrabold text-red-600">آخرین خبرها</h1> <br> <h2>آخرین خبرها در 24 ساعت گذشته</h2></div> <ul class="list rounded-box w-[99%] "></ul>',1),Z=u('<div class="text-center p-4">در حال بارگذاری...</div>');function $(i,h){F(h,!1);let n=q(h,"posts",24,()=>[]);C();var x=J(),d=E(x);{var k=a=>{var s=Y(),v=_(E(s),2);G(v,5,n,H,(P,r,j)=>{var g=X(),y=p(g);y.textContent=j+1;var b=_(y,2),t=p(b);o(b);var f=_(b,2),z=p(f),M=p(z),B=p(M);V(B,()=>e(r).title.rendered),o(M),o(z),o(f),o(g),U(()=>{var O,S,T;D(t,"src",((T=(S=(O=e(r)._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:S[0])==null?void 0:T.source_url)||"/placeholder.jpg"),D(t,"alt",e(r).title.rendered),D(z,"href",`/${e(r).id}/${e(r).slug}`)}),l(P,g)}),o(v),l(a,s)},c=a=>{var s=Z();l(a,s)};I(d,a=>{n()&&n().length>0?a(k):a(c,!1)})}l(i,x),N()}var tt=u('<div class="text-center py-4">در حال بارگذاری...</div>'),et=u('<div class="fixed top-0 left-0 w-full h-full flex items-center justify-center z-50 bg-black bg-opacity-50"><div class="bg-white rounded-lg shadow-lg p-6 text-center"><p class="text-lg font-bold mb-2 text-red-600">اخبار جدید منتشر شد</p> <p class="text-gray-400">در حال به‌روزرسانی صفحه...</p></div></div>'),at=u("<title> </title> <!> <!>",1);function ft(i,h){F(h,!1);const n=w();let x=q(h,"data",8),d=w(x().akharinkhabarPosts),k=w(!1),c=w(!1);async function a(){try{m(c,!0);const t=await A(1,50);t.posts.length>0&&e(d).length>0&&t.posts[0].id!==e(d)[0].id&&(m(k,!0),setTimeout(()=>{m(d,t.posts),location.reload()},3e3)),m(c,!1)}catch(t){console.error("Error checking for new posts:",t),m(c,!1)}}R(()=>{const t=setInterval(a,12e4);return()=>clearInterval(t)}),K(()=>{},()=>{m(n,{title:"آخرین اخبار 24 ساعت گذشته ایران و جهان | پایگاه خبری رسا نشر"})}),L(),C();var s=at(),v=E(s),P=p(v,!0);o(v);var r=_(v,2);{var j=t=>{var f=tt();l(t,f)},g=t=>{$(t,{get posts(){return e(d)}})};I(r,t=>{e(c)?t(j):t(g,!1)})}var y=_(r,2);{var b=t=>{var f=et();l(t,f)};I(y,t=>{e(k)&&t(b)})}U(()=>Q(P,e(n).title)),l(i,s),N()}export{ft as component,vt as universal};
