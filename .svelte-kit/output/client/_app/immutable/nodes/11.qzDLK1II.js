import{m as fe,a as be,n as ge,s as P,o as he,r as ce,e as de,p as xe,i as ve,q as ye}from"../chunks/24e2lO8G.js";import{h as we,t as x,a as b,c as ke}from"../chunks/j7d9bldu.js";import{i as ae}from"../chunks/DzluJWIa.js";import{p as re,l as K,a as me,e as se,f as ee,b as t,t as Q,s as p,m as D,d as Z,g as e,$ as Pe,c as r,r as a,n as pe,aq as ie,J as ue}from"../chunks/XjSzAxxV.js";import{s as Y,e as ne,r as je}from"../chunks/DuS9CJ1Y.js";import{p as oe,s as $e,a as Ce,i as L}from"../chunks/BQQYos4s.js";import{h as te}from"../chunks/CoueGlLg.js";import{p as De}from"../chunks/CENBFzmi.js";import{b as le,S as Ie}from"../chunks/B9VSjDm6.js";import{o as Se}from"../chunks/C7mwA5k6.js";import"../chunks/B118DP3z.js";function Me(I){return function(...g){var i=g[0];return i.preventDefault(),I==null?void 0:I.apply(this,g)}}async function Oe({params:I}){var g,i,c;try{const y=await fe(I.id);if(!y||y.status!=="publish")throw error(404,"پست پیدا نشد");const _=((c=(i=(g=y._embedded)==null?void 0:g["wp:term"])==null?void 0:i[0])==null?void 0:c.map(O=>O.id))||[],[n,d,w]=await Promise.all([be(1,12),fetch("https://rooidadha.ir/wp-json/backlink/v1/links"),ge(I.id,_,3)]),f=await d.json();return{post:y,lasttextPosts:n.posts,backlinks:f,relatedPosts:w}}catch{throw error(404,"پست پیدا نشد")}}const vt=Object.freeze(Object.defineProperty({__proto__:null,load:Oe},Symbol.toStringTag,{value:"Module"}));var qe=x('<meta name="description"> <meta name="keywords"> <meta name="robots" content="index, follow"> <meta name="author"> <link rel="canonical"> <meta property="og:title"> <meta property="og:description"> <meta property="og:type"> <meta property="og:url"> <meta property="og:image"> <meta property="og:site_name"> <meta property="og:locale"> <meta property="article:published_time"> <meta property="article:modified_time"> <!>',1);function ze(I,g){re(g,!1);const[i,c]=$e(),y=()=>Ce(De,"$page",i),_=D(),n=D(),d=D(),w=D(),f=D(),O=D(),q=D();let o=oe(g,"post",8);K(()=>y(),()=>{p(_,`https://rasanashr.ir${y().url.pathname}`)}),K(()=>Z(o()),()=>{p(n,o()?`${o().title.rendered} | رسا نشر`:"رسا نشر")}),K(()=>Z(o()),()=>{var s,l,m;p(d,((m=(l=(s=o())==null?void 0:s.excerpt)==null?void 0:l.rendered)==null?void 0:m.replace(/<[^>]*>/g,"").slice(0,160))||"")}),K(()=>Z(o()),()=>{var s,l;p(w,((l=(s=o())==null?void 0:s.tags_info)==null?void 0:l.map(m=>m.name).join(", "))||"")}),K(()=>(e(n),e(d),e(_),Z(o())),()=>{var s,l,m,S,$,z;p(f,{title:e(n),description:e(d),type:"article",url:e(_),image:((S=(m=(l=(s=o())==null?void 0:s._embedded)==null?void 0:l["wp:featuredmedia"])==null?void 0:m[0])==null?void 0:S.source_url)||"",site_name:"رسا نشر",locale:"fa_IR","article:published_time":($=o())==null?void 0:$.date,"article:modified_time":(z=o())==null?void 0:z.modified})}),K(()=>e(_),()=>{p(O,e(_))}),K(()=>(Z(o()),e(d),e(_)),()=>{var s,l,m,S,$,z,V,N,U,u,k,R;p(q,{"@context":"https://schema.org","@type":"NewsArticle",headline:(l=(s=o())==null?void 0:s.title)==null?void 0:l.rendered,description:e(d),image:((z=($=(S=(m=o())==null?void 0:m._embedded)==null?void 0:S["wp:featuredmedia"])==null?void 0:$[0])==null?void 0:z.source_url)||"",datePublished:(V=o())==null?void 0:V.date,dateModified:(N=o())==null?void 0:N.modified,author:{"@type":"Person",name:((R=(k=(u=(U=o())==null?void 0:U._embedded)==null?void 0:u.author)==null?void 0:k[0])==null?void 0:R.name)||"رسا نشر"},publisher:{"@type":"Organization",name:"رسا نشر",logo:{"@type":"ImageObject",url:"https://rasanashr.ir/duc.png"}},mainEntityOfPage:{"@type":"WebPage","@id":e(_)}})}),me(),ae(),we(s=>{var l=qe(),m=ee(l),S=t(m,2),$=t(S,4),z=t($,2),V=t(z,2),N=t(V,2),U=t(N,2),u=t(U,2),k=t(u,2),R=t(k,2),E=t(R,2),j=t(E,2),C=t(j,2),W=t(C,2);te(W,()=>`<script type="application/ld+json">${JSON.stringify(e(q))}<\/script>`),Q(()=>{var B,T,F,v;Pe.title=e(n),P(m,"content",e(d)),P(S,"content",e(w)),P($,"content",((v=(F=(T=(B=o())==null?void 0:B._embedded)==null?void 0:T.author)==null?void 0:F[0])==null?void 0:v.name)||"رسا نشر"),P(z,"href",e(O)),P(V,"content",e(f).title),P(N,"content",e(f).description),P(U,"content",e(f).type),P(u,"content",e(f).url),P(k,"content",e(f).image),P(R,"content",e(f).site_name),P(E,"content",e(f).locale),P(j,"content",e(f)["article:published_time"]),P(C,"content",e(f)["article:modified_time"])}),b(s,l)}),se(),c()}var Re=x('<div class="text-center py-4"><p>در حال بارگذاری نظرات...</p></div>'),Ee=x('<div class="text-center py-4 text-gray-600"><p>هنوز نظری ثبت نشده است. اولین نفری باشید که نظر می‌دهید!</p></div>'),Te=x('<div class="border-b pb-4 last:border-b-0"><div class="flex justify-between items-start mb-2"><div><span class="font-bold"> </span> <span class="text-gray-500 text-sm mr-2"> </span></div></div> <div class="text-gray-700 leading-relaxed"><!></div></div>'),Ve=x('<div class="space-y-6"></div>'),Be=x('<p class="text-red-500"> </p>'),Fe=x('<p class="text-green-500">نظر شما با موفقیت ثبت شده <br> است! پس از تایید مدیر سایت نمایش داده خواهد شد.</p>'),Je=x('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 w-full max-w-lg mx-4"><h3 class="text-xl text-black font-bold mb-4">ثبت نظر جدید</h3> <form class="space-y-4"><div><label for="name" class="block text-gray-700 mb-1">نام*</label> <input type="text" id="name" class="w-full p-2 border rounded-lg text-red-500" required></div> <div><label for="email" class="block text-gray-700 mb-1">ایمیل*</label> <input type="email" id="email" class="w-full p-2 border rounded-lg text-red-500" required></div> <div><label for="comment" class="block text-gray-700 mb-1">نظر*</label> <textarea id="comment" class="w-full p-2 border rounded-lg h-32 text-red-500" required></textarea></div> <!> <!> <div class="flex justify-end gap-4 mt-6"><button type="button" class="px-4 py-2 text-gray-600 hover:text-gray-800">انصراف</button> <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-200">ارسال نظر</button></div></form></div></div>'),Ne=x('<div class="comments-section mt-8 bg-white rounded-lg shadow-lg p-6"><div class="flex justify-between items-center mb-6"><h4 class="text-xl text-black font-bold"> </h4> <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-200">نوشتن نظر</button></div> <!></div> <!>',1);function Ae(I,g){re(g,!1);let i=oe(g,"postId",8),c=D([]),y=D(!0),_=D(!1),n=D({author_name:"",author_email:"",content:""}),d=D(""),w=D(!1);Se(async()=>{await f()});async function f(){p(y,!0),p(c,await he(i())),p(y,!1)}async function O(){if(p(d,""),p(w,!1),!e(n).content){p(d,"لطفاً متن نظر را وارد کنید");return}try{await ye(i(),e(n)),p(w,!0),setTimeout(()=>{p(_,!1),p(w,!1)},3e3),p(n,{author_name:"",author_email:"",content:""}),await f()}catch{p(d,"خطا در ثبت نظر. لطفاً دوباره تلاش کنید")}}ae();var q=Ne(),o=ee(q),s=r(o),l=r(s),m=r(l);a(l);var S=t(l,2);a(s);var $=t(s,2);{var z=u=>{var k=Re();b(u,k)},V=(u,k)=>{{var R=j=>{var C=Ee();b(j,C)},E=j=>{var C=Ve();de(C,5,()=>e(c),ve,(W,B)=>{var T=Te(),F=r(T),v=r(F),M=r(v),J=r(M,!0);a(M);var A=t(M,2),H=r(A,!0);a(A),a(v),a(F);var G=t(F,2),h=r(G);te(h,()=>e(B).content.rendered),a(G),a(T),Q(X=>{Y(J,e(B).author_name),Y(H,X)},[()=>xe(e(B).date)],ue),b(W,T)}),a(C),b(j,C)};L(u,j=>{e(c).length===0?j(R):j(E,!1)},k)}};L($,u=>{e(y)?u(z):u(V,!1)})}a(o);var N=t(o,2);{var U=u=>{var k=Je(),R=r(k),E=t(r(R),2),j=r(E),C=t(r(j),2);ce(C),a(j);var W=t(j,2),B=t(r(W),2);ce(B),a(W);var T=t(W,2),F=t(r(T),2);je(F),a(T);var v=t(T,2);{var M=h=>{var X=Be(),_e=r(X,!0);a(X),Q(()=>Y(_e,e(d))),b(h,X)};L(v,h=>{e(d)&&h(M)})}var J=t(v,2);{var A=h=>{var X=Fe();b(h,X)};L(J,h=>{e(w)&&h(A)})}var H=t(J,2),G=r(H);pe(2),a(H),a(E),a(R),a(k),le(C,()=>e(n).author_name,h=>ie(n,e(n).author_name=h)),le(B,()=>e(n).author_email,h=>ie(n,e(n).author_email=h)),le(F,()=>e(n).content,h=>ie(n,e(n).content=h)),ne("click",G,()=>p(_,!1)),ne("submit",E,Me(O)),b(u,k)};L(N,u=>{e(_)&&u(U)})}Q(()=>Y(m,`نظرات (${e(c).length??""})`)),ne("click",S,()=>p(_,!0)),b(I,q),se()}var He=x('<a class="block p-3 bg-red-50 hover:bg-red-100 transition-colors rounded-lg border-r-4 border-red-500"><h4 class="font-medium text-gray-800 line-clamp-1"><!></h4></a>'),Le=x('<div class="my-8"><div class="flex items-center gap-2 mb-4"><div class="w-1 h-6 bg-red-600 rounded-full"></div> <h3 class="text-lg font-bold text-red-800">مطالب مرتبط</h3></div> <div class="space-y-2"></div></div>');function Ue(I,g){re(g,!1);let i=oe(g,"relatedPosts",24,()=>[]);ae();var c=ke(),y=ee(c);{var _=n=>{var d=Le(),w=t(r(d),2);de(w,5,()=>i().slice(0,3),ve,(f,O)=>{var q=He(),o=r(q),s=r(o);te(s,()=>e(O).title.rendered),a(o),a(q),Q(()=>P(q,"href",`/${e(O).id}/${e(O).slug}`)),b(f,q)}),a(w),a(d),b(n,d)};L(y,n=>{var d;((d=i())==null?void 0:d.length)>0&&n(_)})}b(I,c),se()}var We=x('<div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <a class="hover:text-red-600"> </a></div>'),Ge=x('<a class="inline-block bg-gray-100 hover:bg-blue-100 text-gray-700 hover:text-blue-700 rounded-full px-3 py-1 text-sm"> </a>'),Ke=x('<div class="border-t pt-6"><h3 class="text-lg text-black font-bold mb-4">برچسب‌ها:</h3> <div class="flex flex-wrap gap-2"></div></div>'),Qe=x('<article class=" rounded-lg shadow-lg overflow-hidden"><div class="p-4"><h1 class="text-lg font-bold mb-4 pt-2 lg:text-3xl text-justify text-black"><!></h1> <div class="flex items-center gap-4 text-gray-600 mb-8 text-sm"><!> <div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span> </span></div></div> <div class="prose prose-lg max-w-none mb-8 px-1 text-justify leading-9 text-black"><!></div> <!> <!></div></article> <!> <div class="mb-8"></div>',1),Xe=x('<div class="text-center py-12"><p class="text-xl text-gray-600">در حال بارگذاری...</p></div>'),Ye=x('<!> <div class="flex flex-col lg:flex-row gap-8 w-full"><div class="w-full lg:w-2/3 text-justify"><!></div> <!></div>',1);function ct(I,g){re(g,!1);const i=D();let c=oe(g,"data",8);function y(s){const l=new Date(s),m={year:"numeric",month:"long",day:"numeric",calendar:"persian"};return new Intl.DateTimeFormat("fa-IR",m).format(l)}K(()=>Z(c()),()=>{p(i,c().post)}),me(),ae();var _=Ye(),n=ee(_);ze(n,{get post(){return c().post}});var d=t(n,2),w=r(d),f=r(w);{var O=s=>{var l=Qe(),m=ee(l),S=r(m),$=r(S),z=r($);te(z,()=>e(i).title.rendered),a($);var V=t($,2),N=r(V);{var U=v=>{var M=We(),J=t(r(M),2),A=r(J,!0);a(J),a(M),Q(()=>{P(J,"href",`/author/${e(i)._embedded.author[0].slug??""}`),Y(A,e(i)._embedded.author[0].name)}),b(v,M)};L(N,v=>{e(i)._embedded&&e(i)._embedded.author&&v(U)})}var u=t(N,2),k=t(r(u),2),R=r(k,!0);a(k),a(u),a(V);var E=t(V,2),j=r(E);te(j,()=>e(i).content.rendered),a(E);var C=t(E,2);{var W=v=>{Ue(v,{get relatedPosts(){return c().relatedPosts}})};L(C,v=>{c().relatedPosts&&c().relatedPosts.length>0&&v(W)})}var B=t(C,2);{var T=v=>{var M=Ke(),J=t(r(M),2);de(J,5,()=>e(i)._embedded["wp:term"].find(A=>{var H;return((H=A[0])==null?void 0:H.taxonomy)==="post_tag"})||[],ve,(A,H)=>{var G=Ge(),h=r(G,!0);a(G),Q(()=>{P(G,"href",`/tag/${e(H).slug??""}`),Y(h,e(H).name)}),b(A,G)}),a(J),a(M),b(v,M)};L(B,v=>{e(i)._embedded&&e(i)._embedded["wp:term"]&&v(T)})}a(S),a(m);var F=t(m,2);Ae(F,{get postId(){return e(i).id}}),pe(2),Q(v=>Y(R,v),[()=>y(e(i).date)],ue),b(s,l)},q=s=>{var l=Xe();b(s,l)};L(f,s=>{e(i)?s(O):s(q,!1)})}a(w);var o=t(w,2);Ie(o,{get lasttextPosts(){return c().lasttextPosts},get backlinks(){return c().backlinks}}),a(d),b(I,_),se()}export{ct as component,vt as universal};
