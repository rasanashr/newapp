import{m as be,a as ge,n as he,s as k,o as xe,r as ce,e as de,p as ye,i as ve,q as we}from"../chunks/24e2lO8G.js";import{H as ke}from"../chunks/Dzz9Ws4N.js";import{h as Pe,t as x,a as g,c as je}from"../chunks/j7d9bldu.js";import{i as ae}from"../chunks/DzluJWIa.js";import{p as re,l as K,a as pe,e as se,f as ee,b as t,t as Q,s as u,m as I,d as Z,g as e,$ as $e,c as r,r as a,n as ue,aq as ie,J as _e}from"../chunks/XjSzAxxV.js";import{s as Y,e as ne,r as Ce}from"../chunks/DuS9CJ1Y.js";import{p as oe,s as De,a as Ie,i as L}from"../chunks/BQQYos4s.js";import{h as te}from"../chunks/CoueGlLg.js";import{p as Se}from"../chunks/B9GwK8tt.js";import{b as le,S as Me}from"../chunks/1yZpvcLQ.js";import{o as Oe}from"../chunks/C7mwA5k6.js";function qe(P){return function(...b){var i=b[0];return i.preventDefault(),P==null?void 0:P.apply(this,b)}}function me(P,b){throw new ke(P,b)}new TextEncoder;async function ze({params:P,fetch:b}){var i,m,S;try{const d=await be(P.id);if(!d||d.status!=="publish")throw me(404,"پست پیدا نشد");const n=((S=(m=(i=d._embedded)==null?void 0:i["wp:term"])==null?void 0:m[0])==null?void 0:S.map($=>$.id))||[],[v,y,f]=await Promise.all([ge(1,12),b("https://rooidadha.ir/wp-json/backlink/v1/links"),he(P.id,n,3)]),q=await y.json();return{post:d,lasttextPosts:v.posts,backlinks:q,relatedPosts:f}}catch(d){throw console.error("خطا در بارگذاری صفحه:",d),me(404,"پست پیدا نشد")}}const mt=Object.freeze(Object.defineProperty({__proto__:null,load:ze},Symbol.toStringTag,{value:"Module"}));var Ee=x('<meta name="description"> <meta name="keywords"> <meta name="robots" content="index, follow"> <meta name="author"> <link rel="canonical"> <meta property="og:title"> <meta property="og:description"> <meta property="og:type"> <meta property="og:url"> <meta property="og:image"> <meta property="og:site_name"> <meta property="og:locale"> <meta property="article:published_time"> <meta property="article:modified_time"> <!>',1);function Re(P,b){re(b,!1);const[i,m]=De(),S=()=>Ie(Se,"$page",i),d=I(),n=I(),v=I(),y=I(),f=I(),q=I(),$=I();let o=oe(b,"post",8);K(()=>S(),()=>{u(d,`https://rasanashr.ir${S().url.pathname}`)}),K(()=>Z(o()),()=>{u(n,o()?`${o().title.rendered} | رسا نشر`:"رسا نشر")}),K(()=>Z(o()),()=>{var s,l,p;u(v,((p=(l=(s=o())==null?void 0:s.excerpt)==null?void 0:l.rendered)==null?void 0:p.replace(/<[^>]*>/g,"").slice(0,160))||"")}),K(()=>Z(o()),()=>{var s,l;u(y,((l=(s=o())==null?void 0:s.tags_info)==null?void 0:l.map(p=>p.name).join(", "))||"")}),K(()=>(e(n),e(v),e(d),Z(o())),()=>{var s,l,p,M,C,z;u(f,{title:e(n),description:e(v),type:"article",url:e(d),image:((M=(p=(l=(s=o())==null?void 0:s._embedded)==null?void 0:l["wp:featuredmedia"])==null?void 0:p[0])==null?void 0:M.source_url)||"",site_name:"رسا نشر",locale:"fa_IR","article:published_time":(C=o())==null?void 0:C.date,"article:modified_time":(z=o())==null?void 0:z.modified})}),K(()=>e(d),()=>{u(q,e(d))}),K(()=>(Z(o()),e(v),e(d)),()=>{var s,l,p,M,C,z,H,J,U,_,w,E;u($,{"@context":"https://schema.org","@type":"NewsArticle",headline:(l=(s=o())==null?void 0:s.title)==null?void 0:l.rendered,description:e(v),image:((z=(C=(M=(p=o())==null?void 0:p._embedded)==null?void 0:M["wp:featuredmedia"])==null?void 0:C[0])==null?void 0:z.source_url)||"",datePublished:(H=o())==null?void 0:H.date,dateModified:(J=o())==null?void 0:J.modified,author:{"@type":"Person",name:((E=(w=(_=(U=o())==null?void 0:U._embedded)==null?void 0:_.author)==null?void 0:w[0])==null?void 0:E.name)||"رسا نشر"},publisher:{"@type":"Organization",name:"رسا نشر",logo:{"@type":"ImageObject",url:"https://rasanashr.ir/duc.png"}},mainEntityOfPage:{"@type":"WebPage","@id":e(d)}})}),pe(),ae(),Pe(s=>{var l=Ee(),p=ee(l),M=t(p,2),C=t(M,4),z=t(C,2),H=t(z,2),J=t(H,2),U=t(J,2),_=t(U,2),w=t(_,2),E=t(w,2),R=t(E,2),j=t(R,2),D=t(j,2),W=t(D,2);te(W,()=>`<script type="application/ld+json">${JSON.stringify(e($))}<\/script>`),Q(()=>{var V,T,B,c;$e.title=e(n),k(p,"content",e(v)),k(M,"content",e(y)),k(C,"content",((c=(B=(T=(V=o())==null?void 0:V._embedded)==null?void 0:T.author)==null?void 0:B[0])==null?void 0:c.name)||"رسا نشر"),k(z,"href",e(q)),k(H,"content",e(f).title),k(J,"content",e(f).description),k(U,"content",e(f).type),k(_,"content",e(f).url),k(w,"content",e(f).image),k(E,"content",e(f).site_name),k(R,"content",e(f).locale),k(j,"content",e(f)["article:published_time"]),k(D,"content",e(f)["article:modified_time"])}),g(s,l)}),se(),m()}var Te=x('<div class="text-center py-4"><p>در حال بارگذاری نظرات...</p></div>'),He=x('<div class="text-center py-4 text-gray-600"><p>هنوز نظری ثبت نشده است. اولین نفری باشید که نظر می‌دهید!</p></div>'),Ve=x('<div class="border-b pb-4 last:border-b-0"><div class="flex justify-between items-start mb-2"><div><span class="font-bold"> </span> <span class="text-gray-500 text-sm mr-2"> </span></div></div> <div class="text-gray-700 leading-relaxed"><!></div></div>'),Be=x('<div class="space-y-6"></div>'),Fe=x('<p class="text-red-500"> </p>'),Je=x('<p class="text-green-500">نظر شما با موفقیت ثبت شده <br> است! پس از تایید مدیر سایت نمایش داده خواهد شد.</p>'),Ne=x('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 w-full max-w-lg mx-4"><h3 class="text-xl text-black font-bold mb-4">ثبت نظر جدید</h3> <form class="space-y-4"><div><label for="name" class="block text-gray-700 mb-1">نام*</label> <input type="text" id="name" class="w-full p-2 border rounded-lg text-red-500" required></div> <div><label for="email" class="block text-gray-700 mb-1">ایمیل*</label> <input type="email" id="email" class="w-full p-2 border rounded-lg text-red-500" required></div> <div><label for="comment" class="block text-gray-700 mb-1">نظر*</label> <textarea id="comment" class="w-full p-2 border rounded-lg h-32 text-red-500" required></textarea></div> <!> <!> <div class="flex justify-end gap-4 mt-6"><button type="button" class="px-4 py-2 text-gray-600 hover:text-gray-800">انصراف</button> <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-200">ارسال نظر</button></div></form></div></div>'),Ae=x('<div class="comments-section mt-8 bg-white rounded-lg shadow-lg p-6"><div class="flex justify-between items-center mb-6"><h4 class="text-xl text-black font-bold"> </h4> <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-200">نوشتن نظر</button></div> <!></div> <!>',1);function Le(P,b){re(b,!1);let i=oe(b,"postId",8),m=I([]),S=I(!0),d=I(!1),n=I({author_name:"",author_email:"",content:""}),v=I(""),y=I(!1);Oe(async()=>{await f()});async function f(){u(S,!0),u(m,await xe(i())),u(S,!1)}async function q(){if(u(v,""),u(y,!1),!e(n).content){u(v,"لطفاً متن نظر را وارد کنید");return}try{await we(i(),e(n)),u(y,!0),setTimeout(()=>{u(d,!1),u(y,!1)},3e3),u(n,{author_name:"",author_email:"",content:""}),await f()}catch{u(v,"خطا در ثبت نظر. لطفاً دوباره تلاش کنید")}}ae();var $=Ae(),o=ee($),s=r(o),l=r(s),p=r(l);a(l);var M=t(l,2);a(s);var C=t(s,2);{var z=_=>{var w=Te();g(_,w)},H=(_,w)=>{{var E=j=>{var D=He();g(j,D)},R=j=>{var D=Be();de(D,5,()=>e(m),ve,(W,V)=>{var T=Ve(),B=r(T),c=r(B),O=r(c),F=r(O,!0);a(O);var N=t(O,2),A=r(N,!0);a(N),a(c),a(B);var G=t(B,2),h=r(G);te(h,()=>e(V).content.rendered),a(G),a(T),Q(X=>{Y(F,e(V).author_name),Y(A,X)},[()=>ye(e(V).date)],_e),g(W,T)}),a(D),g(j,D)};L(_,j=>{e(m).length===0?j(E):j(R,!1)},w)}};L(C,_=>{e(S)?_(z):_(H,!1)})}a(o);var J=t(o,2);{var U=_=>{var w=Ne(),E=r(w),R=t(r(E),2),j=r(R),D=t(r(j),2);ce(D),a(j);var W=t(j,2),V=t(r(W),2);ce(V),a(W);var T=t(W,2),B=t(r(T),2);Ce(B),a(T);var c=t(T,2);{var O=h=>{var X=Fe(),fe=r(X,!0);a(X),Q(()=>Y(fe,e(v))),g(h,X)};L(c,h=>{e(v)&&h(O)})}var F=t(c,2);{var N=h=>{var X=Je();g(h,X)};L(F,h=>{e(y)&&h(N)})}var A=t(F,2),G=r(A);ue(2),a(A),a(R),a(E),a(w),le(D,()=>e(n).author_name,h=>ie(n,e(n).author_name=h)),le(V,()=>e(n).author_email,h=>ie(n,e(n).author_email=h)),le(B,()=>e(n).content,h=>ie(n,e(n).content=h)),ne("click",G,()=>u(d,!1)),ne("submit",R,qe(q)),g(_,w)};L(J,_=>{e(d)&&_(U)})}Q(()=>Y(p,`نظرات (${e(m).length??""})`)),ne("click",M,()=>u(d,!0)),g(P,$),se()}var Ue=x('<a class="block p-3 bg-red-50 hover:bg-red-100 transition-colors rounded-lg border-r-4 border-red-500"><h4 class="font-medium text-gray-800 line-clamp-1"><!></h4></a>'),We=x('<div class="my-8"><div class="flex items-center gap-2 mb-4"><div class="w-1 h-6 bg-red-600 rounded-full"></div> <h3 class="text-lg font-bold text-red-800">مطالب مرتبط</h3></div> <div class="space-y-2"></div></div>');function Ge(P,b){re(b,!1);let i=oe(b,"relatedPosts",24,()=>[]);ae();var m=je(),S=ee(m);{var d=n=>{var v=We(),y=t(r(v),2);de(y,5,()=>i().slice(0,3),ve,(f,q)=>{var $=Ue(),o=r($),s=r(o);te(s,()=>e(q).title.rendered),a(o),a($),Q(()=>k($,"href",`/${e(q).id}/${e(q).slug}`)),g(f,$)}),a(y),a(v),g(n,v)};L(S,n=>{var v;((v=i())==null?void 0:v.length)>0&&n(d)})}g(P,m),se()}var Ke=x('<div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <a class="hover:text-red-600"> </a></div>'),Qe=x('<a class="inline-block bg-gray-100 hover:bg-blue-100 text-gray-700 hover:text-blue-700 rounded-full px-3 py-1 text-sm"> </a>'),Xe=x('<div class="border-t pt-6"><h3 class="text-lg text-black font-bold mb-4">برچسب‌ها:</h3> <div class="flex flex-wrap gap-2"></div></div>'),Ye=x('<article class=" rounded-lg shadow-lg overflow-hidden"><div class="p-4"><h1 class="text-lg font-bold mb-4 pt-2 lg:text-3xl text-justify text-black"><!></h1> <div class="flex items-center gap-4 text-gray-600 mb-8 text-sm"><!> <div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span> </span></div></div> <div class="prose prose-lg max-w-none mb-8 px-1 text-justify leading-9 text-black"><!></div> <!> <!></div></article> <!> <div class="mb-8"></div>',1),Ze=x('<div class="text-center py-12"><p class="text-xl text-gray-600">در حال بارگذاری...</p></div>'),et=x('<!> <div class="flex flex-col lg:flex-row gap-8 w-full"><div class="w-full lg:w-2/3 text-justify"><!></div> <!></div>',1);function pt(P,b){re(b,!1);const i=I();let m=oe(b,"data",8);function S(s){const l=new Date(s),p={year:"numeric",month:"long",day:"numeric",calendar:"persian"};return new Intl.DateTimeFormat("fa-IR",p).format(l)}K(()=>Z(m()),()=>{u(i,m().post)}),pe(),ae();var d=et(),n=ee(d);Re(n,{get post(){return m().post}});var v=t(n,2),y=r(v),f=r(y);{var q=s=>{var l=Ye(),p=ee(l),M=r(p),C=r(M),z=r(C);te(z,()=>e(i).title.rendered),a(C);var H=t(C,2),J=r(H);{var U=c=>{var O=Ke(),F=t(r(O),2),N=r(F,!0);a(F),a(O),Q(()=>{k(F,"href",`/author/${e(i)._embedded.author[0].slug??""}`),Y(N,e(i)._embedded.author[0].name)}),g(c,O)};L(J,c=>{e(i)._embedded&&e(i)._embedded.author&&c(U)})}var _=t(J,2),w=t(r(_),2),E=r(w,!0);a(w),a(_),a(H);var R=t(H,2),j=r(R);te(j,()=>e(i).content.rendered),a(R);var D=t(R,2);{var W=c=>{Ge(c,{get relatedPosts(){return m().relatedPosts}})};L(D,c=>{m().relatedPosts&&m().relatedPosts.length>0&&c(W)})}var V=t(D,2);{var T=c=>{var O=Xe(),F=t(r(O),2);de(F,5,()=>e(i)._embedded["wp:term"].find(N=>{var A;return((A=N[0])==null?void 0:A.taxonomy)==="post_tag"})||[],ve,(N,A)=>{var G=Qe(),h=r(G,!0);a(G),Q(()=>{k(G,"href",`/tag/${e(A).slug??""}`),Y(h,e(A).name)}),g(N,G)}),a(F),a(O),g(c,O)};L(V,c=>{e(i)._embedded&&e(i)._embedded["wp:term"]&&c(T)})}a(M),a(p);var B=t(p,2);Le(B,{get postId(){return e(i).id}}),ue(2),Q(c=>Y(E,c),[()=>S(e(i).date)],_e),g(s,l)},$=s=>{var l=Ze();g(s,l)};L(f,s=>{e(i)?s(q):s($,!1)})}a(y);var o=t(y,2);Me(o,{get lasttextPosts(){return m().lasttextPosts},get backlinks(){return m().backlinks}}),a(v),g(P,d),se()}export{pt as component,mt as universal};
