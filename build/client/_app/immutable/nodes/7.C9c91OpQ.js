import{a as T}from"../chunks/Oyg_TdfJ.js";import{c as L,a as n,t as f,h as U}from"../chunks/CrqCNo7s.js";import{i as $}from"../chunks/C-zKQLXa.js";import{p as A,f as N,e as E,b as x,c as u,r as v,g as a,t as q,m as j,$ as B,s as h}from"../chunks/B6FlMjrQ.js";import{p as F,i as C}from"../chunks/CvhO7qhS.js";import{o as G}from"../chunks/YtwqVO3i.js";import{e as J,s as z,i as K}from"../chunks/BsRF2vc2.js";import{h as Q}from"../chunks/CakbJC7y.js";async function R(){try{return{akharinkhabarPosts:(await T(1,50)).posts}}catch(d){return console.error(`Last news page load error: ${d.message}`),{akharinkhabarPosts:[]}}}const ce=Object.freeze(Object.defineProperty({__proto__:null,load:R},Symbol.toStringTag,{value:"Module"}));var V=f('<li class="list-row bg-linear-to-r/hsl from-indigo-500 to-teal-400 mb-1 items-center"><div class="w-8 text-center text-xl font-bold text-red-700 tabular-nums"></div> <div class="flex items-center justify-center min-w-20"><img class="size-12 rounded-lg" loading="lazy" decoding="async"></div> <div class="list-col-grow"><a class="link no-underline"><h4 class="text-md font-bold no-underline text-justify"><!></h4></a></div></li>'),W=f('<div class="badge badge-md mb-2"><h1 class="font-extrabold text-red-600">آخرین خبرها</h1> <br> <h1>آخرین خبرها در 24 ساعت گذشته</h1></div> <ul class="list rounded-box w-[99%] "></ul>',1),X=f('<div class="text-center p-4">در حال بارگذاری...</div>');function Y(d,m){A(m,!1);let p=F(m,"posts",24,()=>[]);$();var o=L(),g=N(o);{var c=t=>{var l=W(),b=x(N(l),2);J(b,5,p,K,(k,i,y)=>{var e=V(),s=u(e);s.textContent=y+1;var r=x(s,2),_=u(r);v(r);var D=x(r,2),P=u(D),I=u(P),H=u(I);Q(H,()=>a(i).title.rendered),v(I),v(P),v(D),v(e),q(()=>{var M,O,S;z(_,"src",((S=(O=(M=a(i)._embedded)==null?void 0:M["wp:featuredmedia"])==null?void 0:O[0])==null?void 0:S.source_url)||"/placeholder.jpg"),z(_,"alt",a(i).title.rendered),z(P,"href",`/${a(i).id}/${a(i).slug}`)}),n(k,e)}),v(b),n(t,l)},w=t=>{var l=X();n(t,l)};C(g,t=>{p()&&p().length>0?t(c):t(w,!1)})}n(d,o),E()}var Z=f('<div class="text-center py-4">در حال بارگذاری...</div>'),ee=f('<div class="fixed top-0 left-0 w-full h-full flex items-center justify-center z-50 bg-black bg-opacity-50"><div class="bg-white rounded-lg shadow-lg p-6 text-center"><p class="text-lg font-bold mb-2 text-red-600">اخبار جدید منتشر شد</p> <p class="text-gray-400">در حال به‌روزرسانی صفحه...</p></div></div>'),ae=f("<!> <!>",1);function ve(d,m){A(m,!1);let p=F(m,"data",8),o=j(p().akharinkhabarPosts),g=j(!1),c=j(!1);async function w(){try{h(c,!0);const e=await T(1,50);console.log("Current posts:",a(o).map(r=>r.id)),console.log("New posts:",e.posts.map(r=>r.id));const s=e.posts.some(r=>!a(o).some(_=>_.id===r.id));console.log("Has new posts:",s),s&&(h(g,!0),setTimeout(()=>{h(o,e.posts),location.reload()},3e3)),h(c,!1)}catch(e){console.error(`Error checking for new posts: ${e.message}`),h(c,!1)}}G(()=>{const e=setInterval(w,3e5);return()=>clearInterval(e)}),$();var t=ae();U(e=>{B.title="رسانه روز - آخرین خبرهای منتشر شده در رسانه روز"});var l=N(t);{var b=e=>{var s=Z();n(e,s)},k=e=>{Y(e,{get posts(){return a(o)}})};C(l,e=>{a(c)?e(b):e(k,!1)})}var i=x(l,2);{var y=e=>{var s=ee();n(e,s)};C(i,e=>{a(g)&&e(y)})}n(d,t),E()}export{ve as component,ce as universal};
