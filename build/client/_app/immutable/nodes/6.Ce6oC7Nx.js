import{t as x,a as g}from"../chunks/CrqCNo7s.js";import{i as N}from"../chunks/C-zKQLXa.js";import{aE as R,aF as W,p as B,t as S,g as r,e as H,b as k,c as n,F as I,m as E,s as b,aG as X,r as l}from"../chunks/B6FlMjrQ.js";import{i as J,p as Y}from"../chunks/CvhO7qhS.js";import{b as Z,S as $}from"../chunks/D9AOjJGB.js";import{l as ee,e as te,s as F}from"../chunks/iFHsnjK9.js";import{e as L,i as z,r as se}from"../chunks/BsRF2vc2.js";import{s as D}from"../chunks/B-yy7loJ.js";import{p as re}from"../chunks/CWmzcjye.js";import{o as ae}from"../chunks/YtwqVO3i.js";function K(e,o,t){if(e.multiple)return le(e,o);for(var s of e.options){var a=T(s);if(W(a,o)){s.selected=!0;return}}(!t||o!==void 0)&&(e.selectedIndex=-1)}function oe(e,o){R(()=>{var t=new MutationObserver(()=>{var s=e.__value;K(e,s)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ie(e,o,t=o){var s=!0;ee(e,"change",a=>{var c=a?"[selected]":":checked",_;if(e.multiple)_=[].map.call(e.querySelectorAll(c),T);else{var w=e.querySelector(c)??e.querySelector("option:not([disabled])");_=w&&T(w)}t(_)}),R(()=>{var a=o();if(K(e,a,s),s&&a===void 0){var c=e.querySelector(":checked");c!==null&&(a=T(c),t(a))}e.__value=a,s=!1}),oe(e)}function le(e,o){for(var t of e.options)t.selected=~o.indexOf(T(t))}function T(e){return"__value"in e?e.__value:e.value}async function ne({fetch:e}){let o=[],t=[];try{const s=await e("https://rooidadha.ir/wp-json/wp/v2/posts?per_page=5&_embed=true");s.ok&&(o=await s.json())}catch(s){console.error("Error fetching latest posts:",s)}try{const s=await e("https://rooidadha.ir/wp-json/backlink/v1/links");s.ok&&(t=await s.json())}catch(s){console.error("Error fetching popular posts:",s)}return{lasttextPosts:o,backlinks:t}}const Se=Object.freeze(Object.defineProperty({__proto__:null,load:ne},Symbol.toStringTag,{value:"Module"}));var ce=x('<option class="svelte-sbctc4"> </option>'),de=x('<div class="flex items-center space-x-2 svelte-sbctc4"><div class="typing-animation svelte-sbctc4"><span class="dot svelte-sbctc4"></span> <span class="dot svelte-sbctc4"></span> <span class="dot svelte-sbctc4"></span></div></div>'),ve=x('<p class="whitespace-pre-wrap text-justify svelte-sbctc4"> </p>'),ue=x("<div><div><!></div></div>"),pe=x('<div class="flex flex-col h-full bg-white rounded-lg shadow-lg overflow-hidden svelte-sbctc4"><div class="p-4 border-b border-gray-200 svelte-sbctc4"><div class="flex justify-between items-center svelte-sbctc4"><h2 class="text-xl font-bold text-gray-800 svelte-sbctc4">گفتگو با هوش مصنوعی</h2> <select class="bg-white border border-gray-300 rounded-md px-3 py-1 text-sm svelte-sbctc4"></select></div></div> <div class="flex-1 overflow-y-auto p-4 space-y-4 svelte-sbctc4" style="height: 500px;"></div> <div class="p-4 border-t border-gray-200 svelte-sbctc4"><form class="flex gap-2 svelte-sbctc4"><input type="text" placeholder="پیام خود را بنویسید..." class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 svelte-sbctc4"> <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 svelte-sbctc4"> </button></form></div></div>');function fe(e,o){B(o,!1);let t=E([]),s=E(""),a=E(!1),c=E("x-ai/grok-4");const _=[{id:"x-ai/grok-4",name:"Grok 4 (پیشرفته)"},{id:"x-ai/grok-3",name:"Grok 3"},{id:"gpt-5-nano",name:"GPT-5 Nano (سریع)"},{id:"gpt-5-turbo",name:"GPT-5 Turbo"},{id:"gpt-4",name:"GPT-4 (دقیق)"}];ae(()=>{if(typeof window<"u"&&!window.puter){const i=document.createElement("script");i.src="https://js.puter.com/v2/",i.async=!0,document.head.appendChild(i)}});async function w(){if(!r(s).trim())return;const i=r(s);b(s,""),b(a,!0),b(t,[...r(t),{role:"user",content:i}]);try{if(typeof window>"u"||!window.puter||!window.puter.ai)throw new Error("Puter AI is not available");const d=await window.puter.ai.chat(i,{model:r(c),stream:!0});let v="";b(t,[...r(t),{role:"assistant",content:"",isTyping:!0}]);for await(const u of d)u.text&&(v+=u.text,b(t,r(t).map((h,C)=>C===r(t).length-1?{...h,content:v}:h)));b(t,r(t).map(u=>({...u,isTyping:!1})))}catch(d){console.error("Chat error:",d),b(t,[...r(t),{role:"system",content:"متأسفانه در ارتباط با AI مشکلی پیش آمد. لطفاً دوباره تلاش کنید."}])}finally{b(a,!1)}}N();var j=pe(),P=n(j),G=n(P),p=k(n(G),2);S(()=>{r(c),X(()=>{})}),L(p,5,()=>_,z,(i,d)=>{var v=ce(),u={},h=n(v,!0);l(v),S(()=>{u!==(u=r(d).id)&&(v.value=(v.__value=r(d).id)??""),F(h,r(d).name)}),g(i,v)}),l(p),l(G),l(P);var f=k(P,2);L(f,5,()=>r(t),z,(i,d)=>{var v=ue(),u=n(v),h=n(u);{var C=y=>{var M=de();g(y,M)},U=y=>{var M=ve(),V=n(M,!0);l(M),S(()=>F(V,r(d).content)),g(y,M)};J(h,y=>{r(d).isTyping?y(C):y(U,!1)})}l(u),l(v),S(()=>{D(v,1,`flex flex-col ${r(d).role==="user"?"items-end":"items-start"}`,"svelte-sbctc4"),D(u,1,`max-w-[80%] rounded-lg p-3 ${r(d).role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-800"} ${r(d).role==="system"?"bg-red-100 text-red-800":""}`,"svelte-sbctc4")}),g(i,v)}),l(f);var m=k(f,2),O=n(m),q=n(O);se(q);var A=k(q,2),Q=n(A,!0);l(A),l(O),l(m),l(j),S(i=>{q.disabled=r(a),A.disabled=i,F(Q,r(a)?"در حال ارسال...":"ارسال")},[()=>r(a)||!r(s).trim()],I),ie(p,()=>r(c),i=>b(c,i)),Z(q,()=>r(s),i=>b(s,i)),te("submit",O,re(w)),g(e,j),H()}var be=x('<div class="w-full lg:w-1/3"></div>'),_e=x('<div class="flex flex-col lg:flex-row gap-8"><div class="w-full lg:w-2/3"><div class="bg-white rounded-lg shadow-lg overflow-hidden"><div class="p-6"><h1 class="text-2xl font-bold mb-4">گفتگوی آزاد با هوش مصنوعی</h1> <p class="text-gray-600 mb-6">در این بخش می‌توانید به صورت آزاد با هوش مصنوعی گفتگو کنید. نوع مدل هوش مصنوعی را انتخاب کنید و سوالات خود را بپرسید.</p> <!></div></div></div> <!></div>');function Te(e,o){B(o,!1);let t=Y(o,"data",8);N();var s=_e(),a=n(s),c=n(a),_=n(c),w=k(n(_),4);fe(w,{}),l(_),l(c),l(a);var j=k(a,2);{var P=p=>{const f=I(()=>t().lasttextPosts||[]),m=I(()=>t().backlinks||[]);$(p,{get lasttextPosts(){return r(f)},get backlinks(){return r(m)}})},G=p=>{var f=be();g(p,f)};J(j,p=>{var f,m;(f=t())!=null&&f.lasttextPosts||(m=t())!=null&&m.backlinks?p(P):p(G,!1)})}l(s),g(e,s),H()}export{Te as component,Se as universal};
