import{s as ye,a as Pe}from"../chunks/Oyg_TdfJ.js";import{h as $e,t as f,a as u}from"../chunks/CrqCNo7s.js";import{i as ae}from"../chunks/C-zKQLXa.js";import{p as re,l as y,a as se,e as oe,f as M,t as T,s as p,m as g,d as N,g as e,b as a,$ as we,c as d,n as ke,r as c}from"../chunks/B6FlMjrQ.js";import{e as qe,s as je}from"../chunks/iFHsnjK9.js";import{p as ne,s as le,a as ce,i as E}from"../chunks/CvhO7qhS.js";import{s as i,r as Se,e as Ie,i as Re}from"../chunks/BsRF2vc2.js";import{h as ee}from"../chunks/CakbJC7y.js";import{S as Ue,b as Ce}from"../chunks/D9AOjJGB.js";import{p as ie}from"../chunks/BThVNy5y.js";import{g as te}from"../chunks/3CALFuJD.js";import{P as Oe}from"../chunks/B4yyLVG6.js";async function ze({url:k,depends:h}){h("app:search");const m=k.searchParams.get("q")||"",b=parseInt(k.searchParams.get("page")||"1");try{const[l,_,t]=await Promise.all([m?ye(m,b):{posts:[],totalPages:0},Pe(1,12),fetch("https://rooidadha.ir/wp-json/backlink/v1/links")]),r=await t.json();return{query:m,posts:l.posts,totalPages:l.totalPages,currentPage:b,lasttextPosts:_.posts,backlinks:r}}catch(l){return console.error(`Search page error [q=${m}]: ${l.message}`),{query:m,posts:[],totalPages:0,currentPage:b,lasttextPosts:[],backlinks:[]}}}const rt=Object.freeze(Object.defineProperty({__proto__:null,load:ze},Symbol.toStringTag,{value:"Module"}));var De=f('<meta name="description"> <meta name="robots" content="noindex, follow"> <link rel="canonical"> <meta property="og:title"> <meta property="og:description"> <meta property="og:type"> <meta property="og:url"> <meta property="og:site_name"> <meta property="og:locale">',1);function Ee(k,h){re(h,!1);const[m,b]=le(),l=()=>ce(ie,"$page",m),_=g(),t=g(),r=g(),s=g(),P=g();let v=ne(h,"query",8,"");y(()=>l(),()=>{p(_,`https://rasanashr.ir${l().url.pathname}`)}),y(()=>N(v()),()=>{p(t,v()?`جستجو: ${v()} | رسانه روز`:"جستجو در رسانه روز")}),y(()=>N(v()),()=>{p(r,v()?`نتایج جستجو برای ${v()} در پایگاه خبری تحلیلی رسانه روز`:"جستجو در مطالب پایگاه خبری تحلیلی رسانه روز")}),y(()=>(e(t),e(r),e(_)),()=>{p(s,{title:e(t),description:e(r),type:"website",url:e(_),site_name:"رسانه روز",locale:"fa_IR"})}),y(()=>{},()=>{p(P,"https://rasarooz.ir/search")}),se(),ae(),$e(A=>{var C=De(),q=M(C),j=a(q,4),S=a(j,2),$=a(S,2),x=a($,2),I=a(x,2),O=a(I,2),B=a(O,2);T(()=>{we.title=e(t),i(q,"content",e(r)),i(j,"href",e(P)),i(S,"content",e(s).title),i($,"content",e(s).description),i(x,"content",e(s).type),i(I,"content",e(s).url),i(O,"content",e(s).site_name),i(B,"content",e(s).locale)}),u(A,C)}),oe(),b()}var Me=f('<img class="w-[98%] h-50 object-cover rounded-xl">'),Te=f('<article class="bg-stone-100 rounded-lg shadow-lg overflow-hidden"><!> <div class="p-6"><h2 class="text-lg font-bold lg:text-2xl text-justify mb-4"><a class="hover:text-red-600"><!></a></h2> <div class="prose prose-lg max-w-none mb-4 text-gray-600 text-justify leading-7"><!></div></div></article>'),Ae=f('<div class="mt-8"><!></div>'),Be=f('<div class="space-y-8"></div> <!>',1),Fe=f('<p class="text-xl text-gray-600 text-center py-12">نتیجه‌ای برای جستجوی شما یافت نشد.</p>'),Ge=f('<h1 class="text-lg font-bold lg:text-3xl text-justify mb-6"> </h1> <!>',1),He=f('<div class="text-center py-12 text-gray-600">لطفاً عبارت مورد نظر خود را جستجو کنید.</div>'),Je=f('<!> <div class="flex flex-col lg:flex-row gap-8"><div class="w-full lg:w-2/3"><form class="mb-8 flex gap-2 bg-white p-4 rounded-lg shadow-lg"><input type="search" placeholder="جستجو در مطالب..." class="flex-grow p-2 border border-gray-300 rounded focus:outline-none focus:border-red-500"> <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition-colors">جستجو</button></form> <!></div> <!></div>',1);function st(k,h){re(h,!1);const[m,b]=le(),l=()=>ce(ie,"$page",m),_=g();let t=ne(h,"data",8),r=g(t().query),s=g(t().posts),P=g(t().totalPages),v=g(t().currentPage);async function A(o){o.preventDefault(),e(r).trim()&&await te(`/search?q=${encodeURIComponent(e(r).trim())}`,{replaceState:!0})}function C(o){te(`/search?q=${encodeURIComponent(e(r))}&page=${o}`)}y(()=>l(),()=>{p(_,`https://rasanashr.ir${l().url.pathname}${l().url.search}`)}),y(()=>N(t()),()=>{p(s,t().posts),p(P,t().totalPages),p(v,t().currentPage)}),se(),ae();var q=Je(),j=M(q);Ee(j,{get query(){return t().query},get currentUrl(){return e(_)}});var S=a(j,2),$=d(S),x=d($),I=d(x);Se(I),ke(2),c(x);var O=a(x,2);{var B=o=>{var z=Ge(),F=M(z),ge=d(F);c(F);var me=a(F,2);{var ve=w=>{var D=Be(),G=M(D);Ie(G,5,()=>e(s),Re,(R,n)=>{var U=Te(),Q=d(U);{var he=K=>{var L=Me();T(()=>{var X,Y,Z;i(L,"src",((Z=(Y=(X=e(n)._embedded)==null?void 0:X["wp:featuredmedia"])==null?void 0:Y[0])==null?void 0:Z.source_url)||"/placeholder.jpg"),i(L,"alt",e(n).title.rendered)}),u(K,L)};E(Q,K=>{e(n)._embedded&&e(n)._embedded["wp:featuredmedia"]&&K(he)})}var V=a(Q,2),H=d(V),J=d(H),be=d(J);ee(be,()=>e(n).title.rendered),c(J),c(H);var W=a(H,2),xe=d(W);ee(xe,()=>e(n).excerpt.rendered),c(W),c(V),c(U),T(()=>i(J,"href",`/${e(n).id??""}/${e(n).slug??""}`)),u(R,U)}),c(G);var fe=a(G,2);{var _e=R=>{var n=Ae(),U=d(n);Oe(U,{get currentPage(){return e(v)},get totalPages(){return e(P)},onPageChange:C}),c(n),u(R,n)};E(fe,R=>{e(P)>1&&R(_e)})}u(w,D)},ue=w=>{var D=Fe();u(w,D)};E(me,w=>{e(s)&&e(s).length>0?w(ve):w(ue,!1)})}T(()=>je(ge,`نتایج جستجو برای: ${t().query??""}`)),u(o,z)},de=o=>{var z=He();u(o,z)};E(O,o=>{t().query?o(B):o(de,!1)})}c($);var pe=a($,2);Ue(pe,{get lasttextPosts(){return t().lasttextPosts},get backlinks(){return t().backlinks}}),c(S),Ce(I,()=>e(r),o=>p(r,o)),qe("submit",x,A),u(k,q),oe(),b()}export{st as component,rt as universal};
