{"version":3,"file":"_server-C9MOmnUz.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/sitemap.xml/_server.js"],"sourcesContent":["import { g as getTotalPostsCount, a as getTotalTagsCount } from \"../../../chunks/sitemap-data.js\";\nconst SITEMAP_PAGE_SIZE = 1e3;\nfunction createSitemapIndex(sitemaps) {\n  let xml = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n  xml += '<sitemapindex xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">';\n  sitemaps.forEach((sitemap) => {\n    xml += `\n            <sitemap>\n                <loc>${sitemap.loc}</loc>\n            </sitemap>\n        `;\n  });\n  xml += \"</sitemapindex>\";\n  return xml;\n}\nasync function GET({ fetch, url }) {\n  try {\n    const baseUrl = `${url.protocol}//${url.host}`;\n    const [totalPosts, totalTags] = await Promise.all([\n      getTotalPostsCount(fetch),\n      getTotalTagsCount(fetch)\n    ]);\n    const totalPostPages = Math.ceil(totalPosts / SITEMAP_PAGE_SIZE);\n    const totalTagPages = Math.ceil(totalTags / SITEMAP_PAGE_SIZE);\n    const sitemaps = [\n      { loc: `${baseUrl}/sitemaps/pages.xml` },\n      { loc: `${baseUrl}/sitemaps/categories.xml` },\n      { loc: `${baseUrl}/sitemaps/authors.xml` }\n    ];\n    for (let i = 1; i <= totalPostPages; i++) {\n      sitemaps.push({ loc: `${baseUrl}/sitemaps/posts-${i}.xml` });\n    }\n    for (let i = 1; i <= totalTagPages; i++) {\n      sitemaps.push({ loc: `${baseUrl}/sitemaps/tags-${i}.xml` });\n    }\n    const sitemapIndexXml = createSitemapIndex(sitemaps);\n    return new Response(sitemapIndexXml.trim(), {\n      headers: {\n        \"Content-Type\": \"application/xml\",\n        \"Cache-Control\": \"public, max-age=0, s-maxage=3600\"\n        // Cache for 1 hour\n      }\n    });\n  } catch (error) {\n    if (process.env.NODE_ENV === \"production\") {\n      console.error(`Sitemap index generation error: ${error.message}`);\n    }\n    return new Response(\"Error generating sitemap index\", { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;AACA,MAAM,iBAAiB,GAAG,GAAG;AAC7B,SAAS,kBAAkB,CAAC,QAAQ,EAAE;AACtC,EAAE,IAAI,GAAG,GAAG,wCAAwC;AACpD,EAAE,GAAG,IAAI,oEAAoE;AAC7E,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,KAAK;AAChC,IAAI,GAAG,IAAI;AACX;AACA,qBAAqB,EAAE,OAAO,CAAC,GAAG,CAAC;AACnC;AACA,QAAQ,CAAC;AACT,GAAG,CAAC;AACJ,EAAE,GAAG,IAAI,iBAAiB;AAC1B,EAAE,OAAO,GAAG;AACZ;AACA,eAAe,GAAG,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE;AACnC,EAAE,IAAI;AACN,IAAI,MAAM,OAAO,GAAG,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;AAClD,IAAI,MAAM,CAAC,UAAU,EAAE,SAAS,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AACtD,MAAM,kBAAkB,CAAC,KAAK,CAAC;AAC/B,MAAM,iBAAiB,CAAC,KAAK;AAC7B,KAAK,CAAC;AACN,IAAI,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAAC;AACpE,IAAI,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,iBAAiB,CAAC;AAClE,IAAI,MAAM,QAAQ,GAAG;AACrB,MAAM,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,mBAAmB,CAAC,EAAE;AAC9C,MAAM,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,wBAAwB,CAAC,EAAE;AACnD,MAAM,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,qBAAqB,CAAC;AAC9C,KAAK;AACL,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,cAAc,EAAE,CAAC,EAAE,EAAE;AAC9C,MAAM,QAAQ,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,gBAAgB,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;AAClE;AACA,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,aAAa,EAAE,CAAC,EAAE,EAAE;AAC7C,MAAM,QAAQ,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;AACjE;AACA,IAAI,MAAM,eAAe,GAAG,kBAAkB,CAAC,QAAQ,CAAC;AACxD,IAAI,OAAO,IAAI,QAAQ,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE;AAChD,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,iBAAiB;AACzC,QAAQ,eAAe,EAAE;AACzB;AACA;AACA,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE;AAC/C,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC,gCAAgC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;AACvE;AACA,IAAI,OAAO,IAAI,QAAQ,CAAC,gCAAgC,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC1E;AACA;;;;"}