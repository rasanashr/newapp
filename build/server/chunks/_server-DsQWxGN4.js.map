{"version":3,"file":"_server-DsQWxGN4.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/sitemaps/posts-_page_.xml/_server.js"],"sourcesContent":["import { d as fetchSitemapEntries } from \"../../../../chunks/sitemap-data.js\";\nconst SITEMAP_PAGE_SIZE = 1e3;\nfunction generateSitemap(entries) {\n  let xml = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n  xml += '<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">';\n  entries.forEach((entry) => {\n    xml += `\n      <url>\n        <loc>${entry.loc}</loc>\n        <lastmod>${entry.lastmod}</lastmod>\n        <changefreq>weekly</changefreq>\n        <priority>0.8</priority>\n      </url>\n    `;\n  });\n  xml += \"</urlset>\";\n  return xml;\n}\nasync function GET({ params, fetch }) {\n  try {\n    const page = parseInt(params.page, 10);\n    if (isNaN(page) || page < 1) {\n      return new Response(\"Invalid page number\", { status: 400 });\n    }\n    const posts = await fetchSitemapEntries(fetch, \"posts\", page, SITEMAP_PAGE_SIZE);\n    if (posts.length === 0) {\n      return new Response(\"No posts found for this page.\", {\n        status: 404,\n        headers: { \"Content-Type\": \"text/plain\" }\n      });\n    }\n    const sitemapXml = generateSitemap(posts);\n    return new Response(sitemapXml.trim(), {\n      headers: {\n        \"Content-Type\": \"application/xml\",\n        \"Cache-Control\": \"public, max-age=0, s-maxage=3600\"\n        // Cache for 1 hour\n      }\n    });\n  } catch (error) {\n    console.error(`Error generating posts sitemap for page ${params.page}:`, error);\n    return new Response(\"Error generating posts sitemap\", { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;AACA,MAAM,iBAAiB,GAAG,GAAG;AAC7B,SAAS,eAAe,CAAC,OAAO,EAAE;AAClC,EAAE,IAAI,GAAG,GAAG,wCAAwC;AACpD,EAAE,GAAG,IAAI,8DAA8D;AACvE,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;AAC7B,IAAI,GAAG,IAAI;AACX;AACA,aAAa,EAAE,KAAK,CAAC,GAAG,CAAC;AACzB,iBAAiB,EAAE,KAAK,CAAC,OAAO,CAAC;AACjC;AACA;AACA;AACA,IAAI,CAAC;AACL,GAAG,CAAC;AACJ,EAAE,GAAG,IAAI,WAAW;AACpB,EAAE,OAAO,GAAG;AACZ;AACA,eAAe,GAAG,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;AACtC,EAAE,IAAI;AACN,IAAI,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC;AAC1C,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC,EAAE;AACjC,MAAM,OAAO,IAAI,QAAQ,CAAC,qBAAqB,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACjE;AACA,IAAI,MAAM,KAAK,GAAG,MAAM,mBAAmB,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,iBAAiB,CAAC;AACpF,IAAI,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;AAC5B,MAAM,OAAO,IAAI,QAAQ,CAAC,+BAA+B,EAAE;AAC3D,QAAQ,MAAM,EAAE,GAAG;AACnB,QAAQ,OAAO,EAAE,EAAE,cAAc,EAAE,YAAY;AAC/C,OAAO,CAAC;AACR;AACA,IAAI,MAAM,UAAU,GAAG,eAAe,CAAC,KAAK,CAAC;AAC7C,IAAI,OAAO,IAAI,QAAQ,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE;AAC3C,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,iBAAiB;AACzC,QAAQ,eAAe,EAAE;AACzB;AACA;AACA,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,wCAAwC,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;AACnF,IAAI,OAAO,IAAI,QAAQ,CAAC,gCAAgC,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC1E;AACA;;;;"}