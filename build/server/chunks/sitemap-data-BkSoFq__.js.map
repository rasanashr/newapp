{"version":3,"file":"sitemap-data-BkSoFq__.js","sources":["../../../.svelte-kit/adapter-node/chunks/sitemap-data.js"],"sourcesContent":["const WP_API_URL = \"https://rooidadha.ir/wp-json/wp/v2\";\nfunction getSiteURL(fetch) {\n  if (typeof process !== \"undefined\" && process.env.SITE_URL) {\n    return process.env.SITE_URL.replace(/\\/$/, \"\");\n  }\n  if (typeof window !== \"undefined\") {\n    return `${window.location.protocol}//${window.location.host}`;\n  }\n  return \"https://rasarooz.ir\";\n}\nasync function safeApiCall(fetch, endpoint, params = {}) {\n  const url = new URL(`${WP_API_URL}/${endpoint}`);\n  Object.keys(params).forEach((key) => url.searchParams.append(key, params[key]));\n  try {\n    const response = await fetch(url.toString());\n    if (!response.ok) {\n      const errorMessage = await response.text();\n      if (process.env.NODE_ENV === \"production\") {\n        console.error(`API ${endpoint} failed: ${response.status} - ${errorMessage}`);\n      }\n      return { data: [], headers: new Headers() };\n    }\n    const data = await response.json();\n    const safeData = Array.isArray(data) ? data : [];\n    return { data: safeData, headers: response.headers };\n  } catch (error) {\n    if (process.env.NODE_ENV === \"production\") {\n      console.error(`API ${endpoint} error: ${error.message}`);\n    }\n    return { data: [], headers: new Headers() };\n  }\n}\nasync function fetchAllWithPagination(fetch, endpoint, fields) {\n  const { headers, data: firstPageData } = await safeApiCall(fetch, endpoint, { per_page: 100, page: 1, _fields: fields.join(\",\") });\n  const totalPages = parseInt(headers.get(\"x-wp-totalpages\"), 10) || 1;\n  let allData = firstPageData;\n  if (totalPages > 1) {\n    const pagePromises = [];\n    for (let page = 2; page <= totalPages; page++) {\n      pagePromises.push(safeApiCall(fetch, endpoint, { per_page: 100, page, _fields: fields.join(\",\") }));\n    }\n    const results = await Promise.all(pagePromises);\n    results.forEach((result) => {\n      allData = allData.concat(result.data);\n    });\n  }\n  return allData;\n}\nasync function getTotalPostsCount(fetch) {\n  const { headers } = await safeApiCall(fetch, \"posts\", { per_page: 1, _fields: \"id\" });\n  return parseInt(headers.get(\"x-wp-total\"), 10) || 0;\n}\nasync function getTotalTagsCount(fetch) {\n  const { headers } = await safeApiCall(fetch, \"tags\", { per_page: 1, _fields: \"id\" });\n  return parseInt(headers.get(\"x-wp-total\"), 10) || 0;\n}\nasync function fetchAllPages(fetch) {\n  const pages = await fetchAllWithPagination(fetch, \"pages\", [\"slug\", \"modified_gmt\"]);\n  const siteUrl = getSiteURL();\n  return pages.map((page) => ({\n    loc: `${siteUrl}/page/${page.slug}`,\n    lastmod: new Date(page.modified_gmt).toISOString()\n  }));\n}\nasync function fetchAllCategories(fetch) {\n  const categories = await fetchAllWithPagination(fetch, \"categories\", [\"slug\"]);\n  return categories.map((cat) => ({\n    slug: cat.slug,\n    lastmod: (/* @__PURE__ */ new Date()).toISOString()\n  }));\n}\nasync function fetchAllAuthors(fetch) {\n  const authors = await fetchAllWithPagination(fetch, \"users\", [\"slug\"]);\n  const siteUrl = getSiteURL();\n  return authors.map((author) => ({\n    loc: `${siteUrl}/author/${author.slug}`,\n    lastmod: (/* @__PURE__ */ new Date()).toISOString()\n  }));\n}\nasync function fetchSitemapEntries(fetch, type, sitemapPage, sitemapPageSize) {\n  const API_MAX_PER_PAGE = 100;\n  const endpoint = type === \"posts\" ? \"posts\" : \"tags\";\n  const fields = type === \"posts\" ? [\"id\", \"slug\", \"modified_gmt\"] : [\"slug\"];\n  const apiCallsNeeded = Math.ceil(sitemapPageSize / API_MAX_PER_PAGE);\n  const startApiPage = (sitemapPage - 1) * apiCallsNeeded + 1;\n  const endApiPage = startApiPage + apiCallsNeeded - 1;\n  const pagePromises = [];\n  for (let currentPage = startApiPage; currentPage <= endApiPage; currentPage++) {\n    pagePromises.push(safeApiCall(fetch, endpoint, {\n      page: currentPage,\n      per_page: API_MAX_PER_PAGE,\n      _fields: fields.join(\",\")\n    }));\n  }\n  const results = await Promise.all(pagePromises);\n  let allData = [];\n  results.forEach((result) => {\n    if (result.data) {\n      allData = allData.concat(result.data);\n    }\n  });\n  const siteUrl = getSiteURL();\n  if (type === \"posts\") {\n    return allData.map((item) => ({\n      loc: `${siteUrl}/${item.id}/${item.slug}`,\n      lastmod: item.modified_gmt ? new Date(item.modified_gmt).toISOString() : (/* @__PURE__ */ new Date()).toISOString()\n    }));\n  }\n  if (type === \"tags\") {\n    return allData.map((item) => ({\n      loc: `${siteUrl}/tag/${item.slug}`,\n      lastmod: (/* @__PURE__ */ new Date()).toISOString()\n    }));\n  }\n  return [];\n}\nexport {\n  getTotalTagsCount as a,\n  fetchAllCategories as b,\n  fetchAllPages as c,\n  fetchSitemapEntries as d,\n  fetchAllAuthors as f,\n  getTotalPostsCount as g\n};\n"],"names":[],"mappings":"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"}