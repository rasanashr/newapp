{"version":3,"file":"_server-nrX6JGqE.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/sitemap.xml/_server.js"],"sourcesContent":["import { a as fetchPosts, b as fetchCategories, c as fetchTags } from \"../../../chunks/wordpress.js\";\nasync function GET() {\n  try {\n    const postsResult = await fetchPosts(1, 100);\n    const categories = await fetchCategories();\n    const tags = await fetchTags();\n    const baseUrl = \"https://rasanashr.ir\";\n    const currentDate = (/* @__PURE__ */ new Date()).toISOString();\n    let xml = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n    xml += '<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">';\n    xml += `\n            <url>\n                <loc>${baseUrl}</loc>\n                <lastmod>${currentDate}</lastmod>\n                <changefreq>daily</changefreq>\n                <priority>1.0</priority>\n            </url>\n        `;\n    if (postsResult.posts) {\n      postsResult.posts.forEach((post) => {\n        xml += `\n                    <url>\n                        <loc>${baseUrl}/${post.id}/${post.slug}</loc>\n                        <lastmod>${new Date(post.modified).toISOString()}</lastmod>\n                        <changefreq>weekly</changefreq>\n                        <priority>0.8</priority>\n                    </url>\n                `;\n      });\n    }\n    if (categories) {\n      categories.forEach((category) => {\n        if (category.count > 0) {\n          xml += `\n                        <url>\n                            <loc>${baseUrl}/category/${category.slug}</loc>\n                            <lastmod>${currentDate}</lastmod>\n                            <changefreq>weekly</changefreq>\n                            <priority>0.7</priority>\n                        </url>\n                    `;\n        }\n      });\n    }\n    if (tags) {\n      tags.forEach((tag) => {\n        if (tag.count > 0) {\n          xml += `\n                        <url>\n                            <loc>${baseUrl}/tag/${tag.slug}</loc>\n                            <lastmod>${currentDate}</lastmod>\n                            <changefreq>weekly</changefreq>\n                            <priority>0.6</priority>\n                        </url>\n                    `;\n        }\n      });\n    }\n    xml += \"</urlset>\";\n    return new Response(xml.trim(), {\n      headers: {\n        \"Content-Type\": \"application/xml\",\n        \"Cache-Control\": \"max-age=0, s-maxage=3600\"\n      }\n    });\n  } catch (error) {\n    console.error(\"Error generating sitemap:\", error);\n    return new Response(\"Error generating sitemap\", { status: 500 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;AACA,eAAe,GAAG,GAAG;AACrB,EAAE,IAAI;AACN,IAAI,MAAM,WAAW,GAAG,MAAM,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC;AAChD,IAAI,MAAM,UAAU,GAAG,MAAM,eAAe,EAAE;AAC9C,IAAI,MAAM,IAAI,GAAG,MAAM,SAAS,EAAE;AAClC,IAAI,MAAM,OAAO,GAAG,sBAAsB;AAC1C,IAAI,MAAM,WAAW,GAAG,iBAAiB,IAAI,IAAI,EAAE,EAAE,WAAW,EAAE;AAClE,IAAI,IAAI,GAAG,GAAG,wCAAwC;AACtD,IAAI,GAAG,IAAI,8DAA8D;AACzE,IAAI,GAAG,IAAI;AACX;AACA,qBAAqB,EAAE,OAAO,CAAC;AAC/B,yBAAyB,EAAE,WAAW,CAAC;AACvC;AACA;AACA;AACA,QAAQ,CAAC;AACT,IAAI,IAAI,WAAW,CAAC,KAAK,EAAE;AAC3B,MAAM,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;AAC1C,QAAQ,GAAG,IAAI;AACf;AACA,6BAA6B,EAAE,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC;AAC/D,iCAAiC,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,WAAW,EAAE,CAAC;AACzE;AACA;AACA;AACA,gBAAgB,CAAC;AACjB,OAAO,CAAC;AACR;AACA,IAAI,IAAI,UAAU,EAAE;AACpB,MAAM,UAAU,CAAC,OAAO,CAAC,CAAC,QAAQ,KAAK;AACvC,QAAQ,IAAI,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAE;AAChC,UAAU,GAAG,IAAI;AACjB;AACA,iCAAiC,EAAE,OAAO,CAAC,UAAU,EAAE,QAAQ,CAAC,IAAI,CAAC;AACrE,qCAAqC,EAAE,WAAW,CAAC;AACnD;AACA;AACA;AACA,oBAAoB,CAAC;AACrB;AACA,OAAO,CAAC;AACR;AACA,IAAI,IAAI,IAAI,EAAE;AACd,MAAM,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,KAAK;AAC5B,QAAQ,IAAI,GAAG,CAAC,KAAK,GAAG,CAAC,EAAE;AAC3B,UAAU,GAAG,IAAI;AACjB;AACA,iCAAiC,EAAE,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC;AAC3D,qCAAqC,EAAE,WAAW,CAAC;AACnD;AACA;AACA;AACA,oBAAoB,CAAC;AACrB;AACA,OAAO,CAAC;AACR;AACA,IAAI,GAAG,IAAI,WAAW;AACtB,IAAI,OAAO,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE;AACpC,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,iBAAiB;AACzC,QAAQ,eAAe,EAAE;AACzB;AACA,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,2BAA2B,EAAE,KAAK,CAAC;AACrD,IAAI,OAAO,IAAI,QAAQ,CAAC,0BAA0B,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACpE;AACA;;;;"}